FROM python:3.6-alpine

ADD ./ /opt/fba_exc

ARG NUM_GROUPS=1
ARG BATCH_LENGTH=4 

ENV NUM_GROUPS $NUM_GROUPS
ENV BATCH_LENGTH $BATCH_LENGTH

RUN apk -U add --no-cache bash \
    && pip install ConfigArgParse \ 
    && pip install pytz

WORKDIR /opt/fba_exc
VOLUME /data
ENTRYPOINT ./fba-entrypoint.sh $NUM_GROUPS $BATCH_LENGTH
EXPOSE 9000-9050
